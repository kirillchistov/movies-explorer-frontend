{"ast":null,"code":"import _slicedToArray from\"/Users/kirillchistov/Projects/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//  Компонент с коллекцией фильмов  //\n//  Используем стейты для подсчета числа карточек и ширины экрана  //\nimport React,{useEffect,useState}from'react';import'./MoviesCardList.css';import MoviesCard from'../MoviesCard/MoviesCard';import More from'../More/More';import*as params from'../../utils/constants';import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoviesCardList=function MoviesCardList(_ref){var onBookmark=_ref.onBookmark,onCheckBookmark=_ref.onCheckBookmark,removeSavedMovies=_ref.removeSavedMovies,movies=_ref.movies;var location=useLocation();var savedMoviesPage=location.pathname==='/saved-movies';var _useState=useState(0),_useState2=_slicedToArray(_useState,2),moviesOnView=_useState2[0],setMoviesOnView=_useState2[1];var _useState3=useState(window.innerWidth),_useState4=_slicedToArray(_useState3,2),screen=_useState4[0],setScreen=_useState4[1];var countCards=function countCards(){if(screen>=params.LARGESCREEN){setMoviesOnView(params.DEFAULTONLARGESCREEN);}else if(screen<params.LARGESCREEN&&screen>=params.MIDDLESCREEN){setMoviesOnView(params.DEFAULTONMIDDLESCREEN);}else if(screen<=params.MIDDLESCREEN){setMoviesOnView(params.DEFAULTONSMALLSCREEN);}};useEffect(function(){countCards();},[]);window.onresize=function(){setTimeout(function(){countCards();setScreen(window.innerWidth);},1000);};var handleLoadMore=function handleLoadMore(){if(screen>=params.LARGESCREEN){setMoviesOnView(moviesOnView+params.INCREASEONLARGESCREEN);}else if(screen<params.LARGESCREEN&&screen>=params.MIDDLESCREEN){setMoviesOnView(moviesOnView+params.INCREASEONMIDDLESCREEN);}else if(screen<=params.MIDDLESCREEN){setMoviesOnView(moviesOnView+params.INCREASEONSMALLSCREEN);}};return/*#__PURE__*/_jsxs(\"section\",{className:\"movies\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"movies__elements\",children:movies.slice(0,savedMoviesPage?movies.length:moviesOnView).map(function(item){return/*#__PURE__*/_jsx(MoviesCard,{card:item,onBookmark:onBookmark,onCheckBookmark:onCheckBookmark,removeSavedMovies:removeSavedMovies},item.id||item.movieId);})}),!savedMoviesPage&&movies.length>moviesOnView&&/*#__PURE__*/_jsx(More,{onLoadMore:handleLoadMore})]});};export default MoviesCardList;","map":{"version":3,"names":["React","useEffect","useState","MoviesCard","More","params","useLocation","MoviesCardList","onBookmark","onCheckBookmark","removeSavedMovies","movies","location","savedMoviesPage","pathname","moviesOnView","setMoviesOnView","window","innerWidth","screen","setScreen","countCards","LARGESCREEN","DEFAULTONLARGESCREEN","MIDDLESCREEN","DEFAULTONMIDDLESCREEN","DEFAULTONSMALLSCREEN","onresize","setTimeout","handleLoadMore","INCREASEONLARGESCREEN","INCREASEONMIDDLESCREEN","INCREASEONSMALLSCREEN","slice","length","map","item","id","movieId"],"sources":["/Users/kirillchistov/Projects/movies-explorer-frontend/src/components/MoviesCardList/MoviesCardList.jsx"],"sourcesContent":["//  Компонент с коллекцией фильмов  //\n//  Используем стейты для подсчета числа карточек и ширины экрана  //\nimport React, { useEffect, useState } from 'react';\nimport './MoviesCardList.css';\nimport MoviesCard from '../MoviesCard/MoviesCard';\nimport More from '../More/More';\nimport * as params from '../../utils/constants';\nimport { useLocation } from 'react-router-dom';\n\nconst MoviesCardList = ({\n  onBookmark,\n  onCheckBookmark,\n  removeSavedMovies,\n  movies,\n}) => {\n  const location = useLocation();\n  const savedMoviesPage = location.pathname === '/saved-movies';\n\n  const [moviesOnView, setMoviesOnView] = useState(0);\n  const [screen, setScreen] = useState(window.innerWidth);\n\n  const countCards = () => {\n    if (screen >= params.LARGESCREEN) {\n      setMoviesOnView(params.DEFAULTONLARGESCREEN);\n    } else if (screen < params.LARGESCREEN && screen >= params.MIDDLESCREEN) {\n      setMoviesOnView(params.DEFAULTONMIDDLESCREEN);\n    } else if (screen <= params.MIDDLESCREEN) {\n      setMoviesOnView(params.DEFAULTONSMALLSCREEN);\n    }\n  }\n\n  useEffect(() => {\n    countCards();\n  }, []);\n\n  window.onresize = function () {\n    setTimeout(() => {\n      countCards();\n      setScreen(window.innerWidth);\n    }, 1000);\n  };\n\n  const handleLoadMore = () => {\n    if (screen >= params.LARGESCREEN) {\n      setMoviesOnView(moviesOnView + params.INCREASEONLARGESCREEN);\n    } else if (screen < params.LARGESCREEN && screen >= params.MIDDLESCREEN) {\n      setMoviesOnView(moviesOnView + params.INCREASEONMIDDLESCREEN);\n    } else if (screen <= params.MIDDLESCREEN) {\n      setMoviesOnView(moviesOnView + params.INCREASEONSMALLSCREEN);\n    }\n  }\n\n  return (\n    <section className='movies'>\n      <ul className='movies__elements'>\n        {movies.slice(0, savedMoviesPage ? movies.length : moviesOnView).map((item) => (\n          <MoviesCard\n            key={item.id || item.movieId}\n            card={item}\n            onBookmark={onBookmark}\n            onCheckBookmark={onCheckBookmark}\n            removeSavedMovies={removeSavedMovies}\n          />\n        ))}\n      </ul>\n\n      {/* скрыть кнопку если карточек нет или мало */}\n      {!savedMoviesPage && movies.length > moviesOnView && (\n        <More onLoadMore={handleLoadMore} />\n      )}\n    </section>\n  );\n}\n\nexport default MoviesCardList;\n"],"mappings":"4IAAA;AACA;AACA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,sBAAsB,CAC7B,MAAOC,WAAU,KAAM,0BAA0B,CACjD,MAAOC,KAAI,KAAM,cAAc,CAC/B,MAAO,GAAKC,OAAM,KAAM,uBAAuB,CAC/C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAE/C,GAAMC,eAAc,CAAG,QAAjBA,eAAc,MAKd,IAJJC,WAAU,MAAVA,UAAU,CACVC,eAAe,MAAfA,eAAe,CACfC,iBAAiB,MAAjBA,iBAAiB,CACjBC,MAAM,MAANA,MAAM,CAEN,GAAMC,SAAQ,CAAGN,WAAW,EAAE,CAC9B,GAAMO,gBAAe,CAAGD,QAAQ,CAACE,QAAQ,GAAK,eAAe,CAE7D,cAAwCZ,QAAQ,CAAC,CAAC,CAAC,wCAA5Ca,YAAY,eAAEC,eAAe,eACpC,eAA4Bd,QAAQ,CAACe,MAAM,CAACC,UAAU,CAAC,yCAAhDC,MAAM,eAAEC,SAAS,eAExB,GAAMC,WAAU,CAAG,QAAbA,WAAU,EAAS,CACvB,GAAIF,MAAM,EAAId,MAAM,CAACiB,WAAW,CAAE,CAChCN,eAAe,CAACX,MAAM,CAACkB,oBAAoB,CAAC,CAC9C,CAAC,IAAM,IAAIJ,MAAM,CAAGd,MAAM,CAACiB,WAAW,EAAIH,MAAM,EAAId,MAAM,CAACmB,YAAY,CAAE,CACvER,eAAe,CAACX,MAAM,CAACoB,qBAAqB,CAAC,CAC/C,CAAC,IAAM,IAAIN,MAAM,EAAId,MAAM,CAACmB,YAAY,CAAE,CACxCR,eAAe,CAACX,MAAM,CAACqB,oBAAoB,CAAC,CAC9C,CACF,CAAC,CAEDzB,SAAS,CAAC,UAAM,CACdoB,UAAU,EAAE,CACd,CAAC,CAAE,EAAE,CAAC,CAENJ,MAAM,CAACU,QAAQ,CAAG,UAAY,CAC5BC,UAAU,CAAC,UAAM,CACfP,UAAU,EAAE,CACZD,SAAS,CAACH,MAAM,CAACC,UAAU,CAAC,CAC9B,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAED,GAAMW,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAIV,MAAM,EAAId,MAAM,CAACiB,WAAW,CAAE,CAChCN,eAAe,CAACD,YAAY,CAAGV,MAAM,CAACyB,qBAAqB,CAAC,CAC9D,CAAC,IAAM,IAAIX,MAAM,CAAGd,MAAM,CAACiB,WAAW,EAAIH,MAAM,EAAId,MAAM,CAACmB,YAAY,CAAE,CACvER,eAAe,CAACD,YAAY,CAAGV,MAAM,CAAC0B,sBAAsB,CAAC,CAC/D,CAAC,IAAM,IAAIZ,MAAM,EAAId,MAAM,CAACmB,YAAY,CAAE,CACxCR,eAAe,CAACD,YAAY,CAAGV,MAAM,CAAC2B,qBAAqB,CAAC,CAC9D,CACF,CAAC,CAED,mBACE,iBAAS,SAAS,CAAC,QAAQ,wBACzB,WAAI,SAAS,CAAC,kBAAkB,UAC7BrB,MAAM,CAACsB,KAAK,CAAC,CAAC,CAAEpB,eAAe,CAAGF,MAAM,CAACuB,MAAM,CAAGnB,YAAY,CAAC,CAACoB,GAAG,CAAC,SAACC,IAAI,qBACxE,KAAC,UAAU,EAET,IAAI,CAAEA,IAAK,CACX,UAAU,CAAE5B,UAAW,CACvB,eAAe,CAAEC,eAAgB,CACjC,iBAAiB,CAAEC,iBAAkB,EAJhC0B,IAAI,CAACC,EAAE,EAAID,IAAI,CAACE,OAAO,CAK5B,EACH,CAAC,EACC,CAGJ,CAACzB,eAAe,EAAIF,MAAM,CAACuB,MAAM,CAAGnB,YAAY,eAC/C,KAAC,IAAI,EAAC,UAAU,CAAEc,cAAe,EAClC,GACO,CAEd,CAAC,CAED,cAAetB,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}