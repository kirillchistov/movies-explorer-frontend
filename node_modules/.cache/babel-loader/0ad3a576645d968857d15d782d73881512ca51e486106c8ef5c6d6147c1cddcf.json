{"ast":null,"code":"import _slicedToArray from\"/Users/kirillchistov/Projects/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//   Movies — компонент страницы с поиском по фильмам  //\nimport React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import'./Movies.css';import Header from'../Header/Header';import Search from'../Search/Search';import MoviesCardList from'../MoviesCardList/MoviesCardList';import ErrorMessage from'../ErrorMessage/ErrorMessage';import Footer from'../Footer/Footer';import Preloader from'../Preloader/Preloader';import{SHORTFILM}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Movies=function Movies(_ref){var onBookmark=_ref.onBookmark,onCheckBookmark=_ref.onCheckBookmark,setRequestSearchError=_ref.setRequestSearchError,requestSearchError=_ref.requestSearchError,searchMovie=_ref.searchMovie,movies=_ref.movies,loggedIn=_ref.loggedIn,isLoading=_ref.isLoading;var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isShort=_useState2[0],setIsShort=_useState2[1];var handleIsShort=function handleIsShort(){setIsShort(!isShort);localStorage.setItem('shortMovie',!isShort);};useEffect(function(){if(localStorage.getItem('shortMovie')){setIsShort(JSON.parse(localStorage.getItem('shortMovie')));}},[location]);var listMovies=isShort?movies.filter(function(item){return item.duration<=SHORTFILM;}):movies;useEffect(function(){setRequestSearchError({isRequestError:false,messageRequestError:''});listMovies.length===0&&setRequestSearchError({isRequestError:true,messageRequestError:'Ничего не найдено'});},[isShort,listMovies.length,setRequestSearchError]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{loggedIn:loggedIn}),/*#__PURE__*/_jsx(Search,{onIsShort:handleIsShort,isShort:isShort,searchMovie:searchMovie}),/*#__PURE__*/_jsx(ErrorMessage,{requestSearchError:requestSearchError}),isLoading&&/*#__PURE__*/_jsx(Preloader,{}),!isLoading&&/*#__PURE__*/_jsx(MoviesCardList,{onBookmark:onBookmark,onCheckBookmark:onCheckBookmark,movies:listMovies}),/*#__PURE__*/_jsx(Footer,{})]});};export default Movies;","map":{"version":3,"names":["React","useEffect","useState","useLocation","Header","Search","MoviesCardList","ErrorMessage","Footer","Preloader","SHORTFILM","Movies","onBookmark","onCheckBookmark","setRequestSearchError","requestSearchError","searchMovie","movies","loggedIn","isLoading","location","isShort","setIsShort","handleIsShort","localStorage","setItem","getItem","JSON","parse","listMovies","filter","item","duration","isRequestError","messageRequestError","length"],"sources":["/Users/kirillchistov/Projects/movies-explorer-frontend/src/components/Movies/Movies.jsx"],"sourcesContent":["//   Movies — компонент страницы с поиском по фильмам  //\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport './Movies.css';\n\nimport Header from '../Header/Header';\nimport Search from '../Search/Search';\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\n\nimport Footer from '../Footer/Footer';\nimport Preloader from '../Preloader/Preloader';\n\nimport { SHORTFILM } from '../../utils/constants';\n\nconst Movies = ({\n  onBookmark,\n  onCheckBookmark,\n  setRequestSearchError,\n  requestSearchError,\n  searchMovie,\n  movies,\n  loggedIn,\n  isLoading,\n}) => {\n  const location = useLocation();\n  const [isShort, setIsShort] = useState(false);\n  \n  const handleIsShort = () => {\n    setIsShort(!isShort);\n    localStorage.setItem('shortMovie', !isShort);\n  }\n\n  useEffect(() => {\n    if (localStorage.getItem('shortMovie')) {\n      setIsShort(JSON.parse(localStorage.getItem('shortMovie')));\n    }\n  }, [location]);\n\n  const listMovies = isShort\n    ? movies.filter((item) => item.duration <= SHORTFILM)\n    : movies;\n\n  useEffect(() => {\n    setRequestSearchError({\n      isRequestError: false,\n      messageRequestError: '',\n    });\n    listMovies.length === 0 &&\n      setRequestSearchError({\n        isRequestError: true,\n        messageRequestError: 'Ничего не найдено',\n      });\n  }, [isShort, listMovies.length, setRequestSearchError]);\n\n  return (\n    <>\n      <Header loggedIn={loggedIn} />\n\n      <Search\n        onIsShort={handleIsShort}\n        isShort={isShort}\n        searchMovie={searchMovie}\n      />\n\n      <ErrorMessage requestSearchError={requestSearchError} />\n\n      {isLoading && <Preloader />}\n\n      {!isLoading && (\n        <MoviesCardList\n          onBookmark={onBookmark}\n          onCheckBookmark={onCheckBookmark}\n          movies={listMovies}\n        />\n      )}\n\n      <Footer />\n    </>\n  );\n}\n\nexport default Movies;\n"],"mappings":"4IAAA;AACA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,cAAc,CAErB,MAAOC,OAAM,KAAM,kBAAkB,CACrC,MAAOC,OAAM,KAAM,kBAAkB,CACrC,MAAOC,eAAc,KAAM,kCAAkC,CAC7D,MAAOC,aAAY,KAAM,8BAA8B,CAEvD,MAAOC,OAAM,KAAM,kBAAkB,CACrC,MAAOC,UAAS,KAAM,wBAAwB,CAE9C,OAASC,SAAS,KAAQ,uBAAuB,CAAC,6IAElD,GAAMC,OAAM,CAAG,QAATA,OAAM,MASN,IARJC,WAAU,MAAVA,UAAU,CACVC,eAAe,MAAfA,eAAe,CACfC,qBAAqB,MAArBA,qBAAqB,CACrBC,kBAAkB,MAAlBA,kBAAkB,CAClBC,WAAW,MAAXA,WAAW,CACXC,MAAM,MAANA,MAAM,CACNC,QAAQ,MAARA,QAAQ,CACRC,SAAS,MAATA,SAAS,CAET,GAAMC,SAAQ,CAAGjB,WAAW,EAAE,CAC9B,cAA8BD,QAAQ,CAAC,KAAK,CAAC,wCAAtCmB,OAAO,eAAEC,UAAU,eAE1B,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAC1BD,UAAU,CAAC,CAACD,OAAO,CAAC,CACpBG,YAAY,CAACC,OAAO,CAAC,YAAY,CAAE,CAACJ,OAAO,CAAC,CAC9C,CAAC,CAEDpB,SAAS,CAAC,UAAM,CACd,GAAIuB,YAAY,CAACE,OAAO,CAAC,YAAY,CAAC,CAAE,CACtCJ,UAAU,CAACK,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAC5D,CACF,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,GAAMS,WAAU,CAAGR,OAAO,CACtBJ,MAAM,CAACa,MAAM,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACC,QAAQ,EAAItB,SAAS,GAAC,CACnDO,MAAM,CAEVhB,SAAS,CAAC,UAAM,CACda,qBAAqB,CAAC,CACpBmB,cAAc,CAAE,KAAK,CACrBC,mBAAmB,CAAE,EACvB,CAAC,CAAC,CACFL,UAAU,CAACM,MAAM,GAAK,CAAC,EACrBrB,qBAAqB,CAAC,CACpBmB,cAAc,CAAE,IAAI,CACpBC,mBAAmB,CAAE,mBACvB,CAAC,CAAC,CACN,CAAC,CAAE,CAACb,OAAO,CAAEQ,UAAU,CAACM,MAAM,CAAErB,qBAAqB,CAAC,CAAC,CAEvD,mBACE,wCACE,KAAC,MAAM,EAAC,QAAQ,CAAEI,QAAS,EAAG,cAE9B,KAAC,MAAM,EACL,SAAS,CAAEK,aAAc,CACzB,OAAO,CAAEF,OAAQ,CACjB,WAAW,CAAEL,WAAY,EACzB,cAEF,KAAC,YAAY,EAAC,kBAAkB,CAAED,kBAAmB,EAAG,CAEvDI,SAAS,eAAI,KAAC,SAAS,IAAG,CAE1B,CAACA,SAAS,eACT,KAAC,cAAc,EACb,UAAU,CAAEP,UAAW,CACvB,eAAe,CAAEC,eAAgB,CACjC,MAAM,CAAEgB,UAAW,EAEtB,cAED,KAAC,MAAM,IAAG,GACT,CAEP,CAAC,CAED,cAAelB,OAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}