{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kirillchistov/Projects/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kirillchistov/Projects/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/kirillchistov/Projects/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/kirillchistov/Projects/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";//  Модуль авторизации  //\nimport{BASEURL}from'./constants.js';var Auth=/*#__PURE__*/function(){function Auth(options){_classCallCheck(this,Auth);this._baseUrl=options.baseUrl;this._headers=options.headers;}_createClass(Auth,[{key:\"_checkResponse\",value:function(){var _checkResponse2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(res.ok){_context.next=6;break;}_context.t0=Promise;_context.next=4;return res.json();case 4:_context.t1=_context.sent;return _context.abrupt(\"return\",_context.t0.reject.call(_context.t0,_context.t1));case 6:return _context.abrupt(\"return\",res.json());case 7:case\"end\":return _context.stop();}}},_callee);}));function _checkResponse(_x){return _checkResponse2.apply(this,arguments);}return _checkResponse;}()},{key:\"signUpApi\",value:function signUpApi(data){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:'POST',credentials:'include',headers:this._headers,body:JSON.stringify({name:data.name,email:data.email,password:data.password})}).then(this._checkResponse);}},{key:\"signInApi\",value:function signInApi(data){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:'POST',credentials:'include',headers:this._headers,body:JSON.stringify({email:data.email,password:data.password})}).then(this._checkResponse);}},{key:\"authApi\",value:function authApi(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'GET',credentials:'include',headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._checkResponse);}}]);return Auth;}();var API_CONFIG={baseUrl:BASEURL,credentials:'include',headers:{'Accept':'application/json','Content-Type':'application/json'}};var auth=new Auth(API_CONFIG);export default auth;","map":{"version":3,"names":["BASEURL","Auth","options","_baseUrl","baseUrl","_headers","headers","res","ok","Promise","json","reject","data","fetch","method","credentials","body","JSON","stringify","name","email","password","then","_checkResponse","token","API_CONFIG","auth"],"sources":["/Users/kirillchistov/Projects/movies-explorer-frontend/src/utils/auth.js"],"sourcesContent":["//  Модуль авторизации  //\nimport { BASEURL } from './constants.js';\n\nclass Auth {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  async _checkResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(await res.json());\n    }\n    return res.json();\n  }\n\n  signUpApi(data) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        email: data.email,\n        password: data.password,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  signInApi(data) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify({\n        email: data.email,\n        password: data.password,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  authApi(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n    }).then(this._checkResponse);\n  }\n}\n\nconst API_CONFIG = {\n  baseUrl: BASEURL,\n  credentials: 'include',\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\n\nconst auth = new Auth(API_CONFIG);\n\nexport default auth;\n"],"mappings":"8jBAAA;AACA,OAASA,OAAO,KAAQ,gBAAgB,CAAC,GAEnCC,KAAI,yBACR,cAAYC,OAAO,CAAE,4BACnB,IAAI,CAACC,QAAQ,CAAGD,OAAO,CAACE,OAAO,CAC/B,IAAI,CAACC,QAAQ,CAAGH,OAAO,CAACI,OAAO,CACjC,CAAC,wIAED,iBAAqBC,GAAG,uHACjBA,GAAG,CAACC,EAAE,qCACFC,OAAO,uBAAcF,IAAG,CAACG,IAAI,EAAE,8EAAvBC,MAAM,uEAEhBJ,GAAG,CAACG,IAAI,EAAE,wDAClB,+HAED,mBAAUE,IAAI,CAAE,CACd,MAAOC,MAAK,WAAI,IAAI,CAACV,QAAQ,YAAW,CACtCW,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SAAS,CACtBT,OAAO,CAAE,IAAI,CAACD,QAAQ,CACtBW,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,IAAI,CAAEP,IAAI,CAACO,IAAI,CACfC,KAAK,CAAER,IAAI,CAACQ,KAAK,CACjBC,QAAQ,CAAET,IAAI,CAACS,QACjB,CAAC,CACH,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAAC,yBAED,mBAAUX,IAAI,CAAE,CACd,MAAOC,MAAK,WAAI,IAAI,CAACV,QAAQ,YAAW,CACtCW,MAAM,CAAE,MAAM,CACdC,WAAW,CAAE,SAAS,CACtBT,OAAO,CAAE,IAAI,CAACD,QAAQ,CACtBW,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBE,KAAK,CAAER,IAAI,CAACQ,KAAK,CACjBC,QAAQ,CAAET,IAAI,CAACS,QACjB,CAAC,CACH,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAAC,uBAED,iBAAQC,KAAK,CAAE,CACb,MAAOX,MAAK,WAAI,IAAI,CAACV,QAAQ,cAAa,CACxCW,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,SAAS,CACtBT,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAAkB,CAClC,eAAe,kBAAYkB,KAAK,CAClC,CACF,CAAC,CAAC,CAACF,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAAC,oBAGH,GAAME,WAAU,CAAG,CACjBrB,OAAO,CAAEJ,OAAO,CAChBe,WAAW,CAAE,SAAS,CACtBT,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAClB,CACF,CAAC,CAED,GAAMoB,KAAI,CAAG,GAAIzB,KAAI,CAACwB,UAAU,CAAC,CAEjC,cAAeC,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}