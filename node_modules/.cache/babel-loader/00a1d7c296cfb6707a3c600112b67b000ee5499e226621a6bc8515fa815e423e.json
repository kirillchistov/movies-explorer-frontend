{"ast":null,"code":"var _jsxFileName = \"/Users/kirillchistov/Projects/movies-explorer-frontend/src/components/Movies/Movies.jsx\",\n  _s = $RefreshSig$();\n//   Movies — компонент страницы с поиском по фильмам  //\nimport React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport './Movies.css';\nimport Header from '../Header/Header';\nimport Search from '../Search/Search';\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\nimport Footer from '../Footer/Footer';\nimport Preloader from '../Preloader/Preloader';\nimport { SHORTFILM } from '../../utils/constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Movies = _ref => {\n  _s();\n  let {\n    onBookmark,\n    onCheckBookmark,\n    setRequestSearchError,\n    requestSearchError,\n    searchMovie,\n    movies,\n    loggedIn,\n    isLoading\n  } = _ref;\n  const location = useLocation();\n  const [isShort, setIsShort] = React.useState(false);\n  const handleIsShort = () => {\n    setIsShort(!isShort);\n    localStorage.setItem('shortMovie', !isShort);\n  };\n  React.useEffect(() => {\n    if (localStorage.getItem('shortMovie')) {\n      setIsShort(JSON.parse(localStorage.getItem('shortMovie')));\n    }\n  }, [location]);\n\n  // Применение фильтра\n  const listMovies = isShort ? movies.filter(item => item.duration <= SHORTFILM) : movies;\n  React.useEffect(() => {\n    setRequestSearchError({\n      isRequestError: false,\n      messageRequestError: ''\n    });\n    listMovies.length === 0 && setRequestSearchError({\n      isRequestError: true,\n      messageRequestError: 'Ничего не найдено'\n    });\n  }, [isShort, listMovies.length, setRequestSearchError]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      loggedIn: loggedIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Search, {\n      onIsShort: handleIsShort,\n      isShort: isShort,\n      searchMovie: searchMovie\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      requestSearchError: requestSearchError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(Preloader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }, this), !isLoading && /*#__PURE__*/_jsxDEV(MoviesCardList, {\n      onBookmark: onBookmark,\n      onCheckBookmark: onCheckBookmark,\n      movies: listMovies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Movies, \"x16n33YahHJGffdaFN+ucuIUxiM=\", false, function () {\n  return [useLocation];\n});\n_c = Movies;\nexport default Movies;\nvar _c;\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"names":["React","useLocation","Header","Search","MoviesCardList","ErrorMessage","Footer","Preloader","SHORTFILM","Movies","onBookmark","onCheckBookmark","setRequestSearchError","requestSearchError","searchMovie","movies","loggedIn","isLoading","location","isShort","setIsShort","useState","handleIsShort","localStorage","setItem","useEffect","getItem","JSON","parse","listMovies","filter","item","duration","isRequestError","messageRequestError","length"],"sources":["/Users/kirillchistov/Projects/movies-explorer-frontend/src/components/Movies/Movies.jsx"],"sourcesContent":["//   Movies — компонент страницы с поиском по фильмам  //\nimport React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport './Movies.css';\n\nimport Header from '../Header/Header';\nimport Search from '../Search/Search';\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\nimport ErrorMessage from '../ErrorMessage/ErrorMessage';\n\nimport Footer from '../Footer/Footer';\nimport Preloader from '../Preloader/Preloader';\n\nimport { SHORTFILM } from '../../utils/constants';\n\nconst Movies = ({\n  onBookmark,\n  onCheckBookmark,\n  setRequestSearchError,\n  requestSearchError,\n  searchMovie,\n  movies,\n  loggedIn,\n  isLoading,\n}) => {\n  const location = useLocation();\n  const [isShort, setIsShort] = React.useState(false);\n  \n  const handleIsShort = () => {\n    setIsShort(!isShort);\n    localStorage.setItem('shortMovie', !isShort);\n  }\n\n  React.useEffect(() => {\n    if (localStorage.getItem('shortMovie')) {\n      setIsShort(JSON.parse(localStorage.getItem('shortMovie')));\n    }\n  }, [location]);\n\n  // Применение фильтра\n  const listMovies = isShort\n    ? movies.filter((item) => item.duration <= SHORTFILM)\n    : movies;\n\n  React.useEffect(() => {\n    setRequestSearchError({\n      isRequestError: false,\n      messageRequestError: '',\n    });\n    listMovies.length === 0 &&\n      setRequestSearchError({\n        isRequestError: true,\n        messageRequestError: 'Ничего не найдено',\n      });\n  }, [isShort, listMovies.length, setRequestSearchError]);\n\n  return (\n    <>\n      <Header loggedIn={loggedIn} />\n\n      <Search\n        onIsShort={handleIsShort}\n        isShort={isShort}\n        searchMovie={searchMovie}\n      />\n\n      <ErrorMessage requestSearchError={requestSearchError} />\n\n      {isLoading && <Preloader />}\n\n      {!isLoading && (\n        <MoviesCardList\n          onBookmark={onBookmark}\n          onCheckBookmark={onCheckBookmark}\n          movies={listMovies}\n        />\n      )}\n\n      <Footer />\n    </>\n  );\n}\n\nexport default Movies;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,cAAc;AAErB,OAAOC,MAAM,MAAM,kBAAkB;AACrC,OAAOC,MAAM,MAAM,kBAAkB;AACrC,OAAOC,cAAc,MAAM,kCAAkC;AAC7D,OAAOC,YAAY,MAAM,8BAA8B;AAEvD,OAAOC,MAAM,MAAM,kBAAkB;AACrC,OAAOC,SAAS,MAAM,wBAAwB;AAE9C,SAASC,SAAS,QAAQ,uBAAuB;AAAC;AAAA;AAElD,MAAMC,MAAM,GAAG,QAST;EAAA;EAAA,IATU;IACdC,UAAU;IACVC,eAAe;IACfC,qBAAqB;IACrBC,kBAAkB;IAClBC,WAAW;IACXC,MAAM;IACNC,QAAQ;IACRC;EACF,CAAC;EACC,MAAMC,QAAQ,GAAGjB,WAAW,EAAE;EAC9B,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGpB,KAAK,CAACqB,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMC,aAAa,GAAG,MAAM;IAC1BF,UAAU,CAAC,CAACD,OAAO,CAAC;IACpBI,YAAY,CAACC,OAAO,CAAC,YAAY,EAAE,CAACL,OAAO,CAAC;EAC9C,CAAC;EAEDnB,KAAK,CAACyB,SAAS,CAAC,MAAM;IACpB,IAAIF,YAAY,CAACG,OAAO,CAAC,YAAY,CAAC,EAAE;MACtCN,UAAU,CAACO,IAAI,CAACC,KAAK,CAACL,YAAY,CAACG,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;IAC5D;EACF,CAAC,EAAE,CAACR,QAAQ,CAAC,CAAC;;EAEd;EACA,MAAMW,UAAU,GAAGV,OAAO,GACtBJ,MAAM,CAACe,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,QAAQ,IAAIxB,SAAS,CAAC,GACnDO,MAAM;EAEVf,KAAK,CAACyB,SAAS,CAAC,MAAM;IACpBb,qBAAqB,CAAC;MACpBqB,cAAc,EAAE,KAAK;MACrBC,mBAAmB,EAAE;IACvB,CAAC,CAAC;IACFL,UAAU,CAACM,MAAM,KAAK,CAAC,IACrBvB,qBAAqB,CAAC;MACpBqB,cAAc,EAAE,IAAI;MACpBC,mBAAmB,EAAE;IACvB,CAAC,CAAC;EACN,CAAC,EAAE,CAACf,OAAO,EAAEU,UAAU,CAACM,MAAM,EAAEvB,qBAAqB,CAAC,CAAC;EAEvD,oBACE;IAAA,wBACE,QAAC,MAAM;MAAC,QAAQ,EAAEI;IAAS;MAAA;MAAA;MAAA;IAAA,QAAG,eAE9B,QAAC,MAAM;MACL,SAAS,EAAEM,aAAc;MACzB,OAAO,EAAEH,OAAQ;MACjB,WAAW,EAAEL;IAAY;MAAA;MAAA;MAAA;IAAA,QACzB,eAEF,QAAC,YAAY;MAAC,kBAAkB,EAAED;IAAmB;MAAA;MAAA;MAAA;IAAA,QAAG,EAEvDI,SAAS,iBAAI,QAAC,SAAS;MAAA;MAAA;MAAA;IAAA,QAAG,EAE1B,CAACA,SAAS,iBACT,QAAC,cAAc;MACb,UAAU,EAAEP,UAAW;MACvB,eAAe,EAAEC,eAAgB;MACjC,MAAM,EAAEkB;IAAW;MAAA;MAAA;MAAA;IAAA,QAEtB,eAED,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA,gBACT;AAEP,CAAC;AAAA,GAlEKpB,MAAM;EAAA,QAUOR,WAAW;AAAA;AAAA,KAVxBQ,MAAM;AAoEZ,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}